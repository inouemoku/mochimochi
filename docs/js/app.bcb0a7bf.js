(function(e){function t(t){for(var a,o,l=t[0],r=t[1],c=t[2],m=0,h=[];m<l.length;m++)o=l[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);d&&d(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,l=1;l<s.length;l++){var r=s[l];0!==i[r]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={app:0},n=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=r;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0211":function(e,t,s){"use strict";s("061c")},"061c":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"container-fluid"},[s("h3",{staticClass:"my-3"},[e._v("MochiMochi - ココフォリアログ整形ツール")]),e._m(0),s("div",{staticClass:"row mt-3"},[s("div",{staticClass:"col-md-12"},[s("ccfolia-formatter")],1)])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("small",[e._v(" 自分用に作ったログ整形ツールです。ココフォリアのログファイルを読み込ませて「整形！」ボタンを押すとダウンロードできます。"),s("br"),e._v(" 「整形しないでダウンロード」ボタンを押すと元の形式のままダウンロードできます。選択したタブとシークレットダイスだけ反映されます。"),s("br"),e._v(" システムに「その他」以外を選択した場合は、ダイス結果も見られます。 ")])}],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"ccfoliaLog",staticClass:"mb-5",attrs:{model:e.ccfoliaLog}},[s("system-form",{on:{select:e.selectSystem}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.ccfoliaLog.rows.length>0,expression:"ccfoliaLog.rows.length > 0"}]},[s("dice-result",{attrs:{visible:"other"!=e.ccfoliaLog.system,system:e.system,names:e.names,initialSelectedNameTabs:e.selectedNameTabs,ccfoliaLog:e.ccfoliaLog}}),s("header-setting",{ref:"headerSetting",attrs:{initialHeaderColor1:e.ccfoliaLog.header_color1,initialHeaderColor2:e.ccfoliaLog.header_color2,initialLinkColor:e.ccfoliaLog.link_color,dividerRows:e.dividerRows},on:{changeHeaderColor1:e.changeHeaderColor1,changeHeaderColor2:e.changeHeaderColor2,changeLinkColor:e.changeLinkColor,changeTitle:e.changeTitle}}),s("tab-setting",{attrs:{ccfoliaLog:e.ccfoliaLog,initialSelectedOutputTabs:e.selectedOutputTabs,inisitalIsHideSecretDice:e.isHideSecretDice},on:{changeIsHideSecretDice:e.changeIsHideSecretDice,changeSelectedOutputTabs:e.changeSelectedOutputTabs}}),s("log-editor",{attrs:{initialCcfoliaLog:e.ccfoliaLog,selectedOutputTabs:e.selectedOutputTabs,dividerRows:e.dividerRows},on:{changeCcfoliaLog:e.changeCcfoliaLog}}),s("log-seconds",{ref:"logSeconds",attrs:{initialCcfoliaLog:e.ccfoliaLogSecond},on:{addSelected:e.addSelected}})],1),s("el-form-item",{attrs:{prop:"file"}},[s("el-upload",{attrs:{drag:"",action:"","auto-upload":!1,"on-change":e.handleChangeFile,"file-list":e.fileList}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[e._v("Drop file here or "),s("em",[e._v("click to upload")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.ccfoliaLog.rows.length>0,expression:"ccfoliaLog.rows.length > 0"}]},[e._v("もう一度ファイルを読み込むとログを追加できます。")])],1),s("el-tooltip",{attrs:{placement:"top-start"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("ヘッダーやタブなど全ての設定が反映されます。")]),s("el-button",{staticClass:"px-5",attrs:{type:"primary",disabled:e.ccfoliaLog.rows.length<=0},on:{click:e.postCcfoliaLog}},[e._v("整形！")])],1),s("el-tooltip",{attrs:{placement:"top-start"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("タブとシークレットダイスの設定だけ反映されます。")]),s("el-dropdown",{staticClass:"px-3",attrs:{"split-button":"",type:"warning",disabled:e.ccfoliaLog.rows.length<=0},on:{click:e.postOriginalCcfoliaLog,command:e.postOriginalCcfoliaLogConvert}},[e._v(" 整形しないでダウンロード "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"japanese"}},[e._v("タブ名を [メイン] [情報] [雑談] に統一する")]),s("el-dropdown-item",{attrs:{command:"english"}},[e._v("タブ名を [main] [info] [other] に統一する")])],1)],1)],1)],1),s("el-divider"),s("histories")],1)},l=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form-item",{attrs:{prop:"system"}},[s("el-select",{staticStyle:{width:"250px"},model:{value:e.selectedSystem,callback:function(t){e.selectedSystem=t},expression:"selectedSystem"}},e._l(e.systems,(function(e){return s("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})})),1)],1)},c=[],d={data(){return{predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],systems:[{key:"coc6",prefix:"【CoC】",name:"クトゥルフ神話TRPG(6版)",diceText:"Cthulhu",diceResults:[{key:"critical",name:"決定的成功"},{key:"famble",name:"致命的失敗"},{key:"special",name:"スペシャル"},{key:"success",name:"成功"},{key:"failed",name:"失敗"}],diceTypes:[{resultKey:"critical",name:"決定的成功",class:"success"},{resultKey:"famble",name:"致命的失敗",class:"failed"},{resultKey:"special",name:"スペシャル",class:"success"},{resultKey:"success",name:"成功",class:"success"},{resultKey:"success",name:"部分的成功",class:"success"},{resultKey:"failed",name:"失敗",class:"failed"},{resultKey:"failed",name:"故障",class:"failed"}]},{key:"coc7",prefix:"【CoC】",name:"新クトゥルフ神話TRPG(7版)",diceText:"Cthulhu7th",diceResults:[{key:"critical",name:"クリティカル"},{key:"famble",name:"ファンブル"},{key:"extreme_success",name:"イクストリーム成功"},{key:"hard_success",name:"ハード成功"},{key:"regular_success",name:"レギュラー成功"},{key:"success",name:"成功"},{key:"failed",name:"失敗"}],diceTypes:[{resultKey:"critical",name:"クリティカル",class:"success"},{resultKey:"famble",name:"ファンブル",class:"failed"},{resultKey:"extreme_success",name:"イクストリーム成功",class:"success"},{resultKey:"hard_success",name:"ハード成功",class:"success"},{resultKey:"regular_success",name:"レギュラー成功",class:"success"},{resultKey:"success",name:"成功",class:"success"},{resultKey:"success",name:"部分的成功",class:"success"},{resultKey:"failed",name:"失敗",class:"failed"},{resultKey:"failed",name:"故障",class:"failed"}]},{key:"emoklore",prefix:"【エモクロア】",name:"エモクロアTRPG",diceText:"Emoklore",diceResults:[{key:"catastrophe",name:"カタストロフ"},{key:"miracle",name:"ミラクル"},{key:"triple",name:"トリプル"},{key:"double",name:"ダブル"},{key:"success",name:"シングル"},{key:"failed",name:"失敗"},{key:"famble",name:"ファンブル"}],diceTypes:[{resultKey:"catastrophe",name:"カタストロフ!",class:"success"},{resultKey:"miracle",name:"ミラクル!",class:"success"},{resultKey:"triple",name:"トリプル!",class:"success"},{resultKey:"double",name:"ダブル!",class:"success"},{resultKey:"success",name:"成功!",class:"success"},{resultKey:"failed",name:"失敗!",class:"failed"},{resultKey:"famble",name:"ファンブル!",class:"failed"}]},{key:"insane",prefix:"【インセイン】",name:"インセイン",diceText:"Insane",diceResults:[{key:"special",name:"スペシャル"},{key:"success",name:"成功"},{key:"failed",name:"失敗"},{key:"famble",name:"ファンブル"}],diceTypes:[{resultKey:"famble",name:"ファンブル",class:"failed"},{resultKey:"special",name:"スペシャル",class:"success"},{resultKey:"success",name:"成功",class:"success"},{resultKey:"failed",name:"失敗",class:"failed"}]},{key:"shinobigami",prefix:"【シノビガミ】",name:"シノビガミ",diceText:"ShinobiGami",diceResults:[{key:"special",name:"スペシャル"},{key:"success",name:"成功"},{key:"failed",name:"失敗"},{key:"famble",name:"ファンブル"}],diceTypes:[{resultKey:"famble",name:"ファンブル",class:"failed"},{resultKey:"special",name:"スペシャル",class:"success"},{resultKey:"success",name:"成功",class:"success"},{resultKey:"failed",name:"失敗",class:"failed"}]},{key:"other",prefix:"",name:"その他",diceText:"",diceResults:[],diceTypes:[]}]}}},m={name:"SystemForm",mixins:[d],props:{initialSystem:{type:String,default:"coc6"}},data(){return{selectedSystem:this.initialSystem}},watch:{selectedSystem:function(e){this.$emit("select",e)}}},h=m,u=s("2877"),f=Object(u["a"])(h,r,c,!1,null,null,null),p=f.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("el-card",{staticClass:"mb-3",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("ダイス結果 "),s("el-tooltip",{attrs:{effect:"dark",placement:"top-start",content:"ダイス結果だけまとめて見られます。"}},[s("el-button",{attrs:{icon:"el-icon-question",type:"text"}})],1)],1)]),s("el-radio-group",{attrs:{size:"mini"},model:{value:e.selectedDiceResult,callback:function(t){e.selectedDiceResult=t},expression:"selectedDiceResult"}},e._l(e.system.diceResults,(function(t){return s("el-radio-button",{key:t.key,attrs:{label:t.key}},[e._v(e._s(t.name))])})),1),s("el-checkbox-group",{model:{value:e.selectedDiceTabs,callback:function(t){e.selectedDiceTabs=t},expression:"selectedDiceTabs"}},[s("el-checkbox",{attrs:{label:"メイン"}}),s("el-checkbox",{attrs:{label:"情報"}}),s("el-checkbox",{attrs:{label:"雑談"}}),e._l(e.ccfoliaLog.tabs,(function(e,t){return s("el-checkbox",{key:t,attrs:{label:e.name}})}))],2),s("el-checkbox-group",{model:{value:e.selectedNameTabs,callback:function(t){e.selectedNameTabs=t},expression:"selectedNameTabs"}},e._l(e.names,(function(e,t){return s("el-checkbox",{key:t,attrs:{label:e}})})),1),s("small",[e._v("計")]),e._v(" "+e._s(e.diceRows.length)+" "),s("small",[e._v("回")]),e._l(e.diceRows,(function(t,a){return s("div",{key:a},[s("div",{style:"color:"+t.color},[e._v(" ["+e._s(t.tab_name)+"] "+e._s(t.name)+"： "),s("span",{domProps:{innerHTML:e._s(t.body)}})])])}))],2):e._e()},_=[];s("13d5");class g{constructor(e=null){this._key=this.paramFromObject(e,"key"),this._color=this.paramFromObject(e,"color"),this._tab_name=this.paramFromObject(e,"tab_name"),this._tab_type=this.paramFromObject(e,"tab_type"),this._name=this.paramFromObject(e,"name"),this._body=this.paramFromObject(e,"body"),this._is_divider=this.paramFromObject(e,"is_divider"),this._dice_type=this.paramFromObject(e,"dice_type"),this._is_oneline=this.paramFromObject(e,"is_oneline"),this._is_secret=this.paramFromObject(e,"is_secret")}paramFromObject(e,t,s=null){return null==e||null==e[t]?s:e[t]}format(e,t,s,a){if(this.is_divider)return`    <h2 id="key${this.key}" class="day">${this.body}</h2><hr class="day-line">\n`;if(!s.includes(this.replaced_tab_name))return"";const i=this.formatBySystem(e,a);return`      <div class="${this.class_name(t)}" style="color:${this.color};" tab-name="${this.htmlSpecialChars(this.tab_name)}">\n        <span class="name-field"><span class="name"><span>${this.name}</span> :</span></span>\n        <span class="text">${i}</span>\n      </div>\n`}htmlSpecialChars(e){var t=document.createTextNode(e),s=document.createElement("p");return s.appendChild(t),s.innerHTML}notFormat(e,t,s=null){if(!e.includes(this.replaced_tab_name))return"";const a=t&&this.is_secret?"シークレットダイス":this.body;return`    <p style="color:${this.color};">\n      <span> [${this.tabName(s)}]</span>\n      <span>${this.name}</span> :\n      <span>${a}</span>\n    </p>\n    \n`}tabName(e=null){return"japanese"==e?this.replaced_tab_name:"english"==e?this.replaced_eng_tab_name:this.tab_name}formatBySystem(e,t){if(t&&this.is_secret)return"シークレットダイス";const s=this.dice_type?this.dice_type.class:"";if("coc6"==e)return this.is_oneline?this.body.replace(/(.*)\((.*)\)(.*)＞ (.*)/,`$1<br>\n<span class="dice ${s}">($2)$3＞ $4</span>`):this.body.replace(/(.*)\nCthulhu : (.*)/,`$1<br>\n<span class="dice ${s}">Cthulhu :$2\n</span>`);if("emoklore"==e||"insane"==e||"shinobigami"==e){const e=/(.*)\((.*)\) ＞ \((.*)\) ＞ (.*)/;return e.test(this.body)?this.body.replace(e,`$1<br>\n<span class="dice ${s}">($2) ＞ ($3) ＞ $4</span>`):this.body.replace(/(.*)\((.*)\)(.*)＞ (.*)/,`$1<br>\n<span class="dice ${s}">($2)$3＞ $4</span>`)}return this.body}class_name(e){return"メイン"==this.tab_name||"main"==this.tab_name||null==this.tab_name||""==this.tab_name?"":"雑談"==this.tab_name||"other"==this.tab_name?"other":"情報"==this.tab_name||"info"==this.tab_name?"info":(console.log(e),"secret tab"+e.findIndex(e=>e.name==this.tab_name))}static fromObject(e=null){return new g(e)}get key(){return this._key}set key(e){this._key=e}get color(){return this._color}set color(e){this._color=e}get tab_name(){return this._tab_name}set tab_name(e){this._tab_name=e}get replaced_tab_name(){return"main"==this._tab_name?"メイン":"info"==this._tab_name?"情報":"other"==this._tab_name?"雑談":this._tab_name}get replaced_eng_tab_name(){return"メイン"==this._tab_name?"main":"情報"==this._tab_name?"info":"雑談"==this._tab_name?"other":this._tab_name}get tab_type(){return this._tab_type}set tab_type(e){this._tab_type=e}get name(){return this._name}set name(e){this._name=e}get body(){return this._body}set body(e){this._body=e}get is_divider(){return this._is_divider}set is_divider(e){this._is_divider=e}get dice_type(){return this._dice_type}set dice_type(e){this._dice_type=e}get is_oneline(){return this._is_oneline}set is_oneline(e){this._is_oneline=e}get is_secret(){return this._is_secret}set is_secret(e){this._is_secret=e}}class y{constructor(e=null){this._file=this.paramFromObject(e,"file"),this._system=this.paramFromObject(e,"system","coc6"),this._header_color1=this.paramFromObject(e,"header_color1","#000"),this._header_color2=this.paramFromObject(e,"header_color2","#2E9BB1"),this._link_color=this.paramFromObject(e,"link_color","#fff"),this._title=this.paramFromObject(e,"title",""),this._tabs=this.paramFromObject(e,"tabs",[]),this._doc="",this._rows=e?e["rows"].map(e=>g.fromObject(e)):[]}paramFromObject(e,t,s=null){return null==e||null==e[t]?s:e[t]}static fromObject(e=null){return new y(e)}get doc(){return this._doc}set doc(e){this._doc=e}get file(){return this._file}set file(e){this._file=e}get system(){return this._system}set system(e){this._system=e}get header_color1(){return this._header_color1}set header_color1(e){this._header_color1=e}get header_color2(){return this._header_color2}set header_color2(e){this._header_color2=e}get link_color(){return this._link_color}set link_color(e){this._link_color=e}get title(){return this._title}set title(e){this._title=e}get tabs(){return this._tabs}set tabs(e){this._tabs=e}get rows(){return this._rows}set rows(e){this._rows=e}format(e,t){console.log(this.title);const s=this.rows.filter(e=>e.is_divider),a=s.map(e=>`      <a href="#key${e.key}">${e.name}</a>`).join("\n");let i="";return this.tabs&&(i=this.tabs.reduce((e,t,s)=>(e+=`\n  .tab${s} {\n    background-color: ${t.background_color};\n    border-left:solid 2px ${t.line_color};\n  }\n`,e),"")),`\n<!DOCTYPE html>\n<html lang="ja">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <meta http-equiv="X-UA-Compatible" content="ie=edge" />\n    <title>${this.title}</title>\n  </head>\n  <header id="header">\n    <h1>${this.title}</h1>\n    <div class="menu">\n${a}\n    </div>\n  </header>\n  <body>\n    <div class="main">\n${this.rows.map(s=>s.format(this.system,this.tabs,e,t)).join("\n")}\n    </div>\n  </body>\n</html>\n<style type="text/css">\n  * {\n    margin: 0px;\n    padding: 0px;\n    font-family: sans-serif;\n  }\n  #header {\n    background: linear-gradient(${this.header_color1},${this.header_color2});\n    position: fixed;\n    width: 100%;\n    padding:10px;\n    opacity: 0.8;\n  }\n  #header a {\n    color: ${this.link_color};\n    text-decoration: none;\n    font-size: 14px;\n  }\n  #header a:hover{\n    text-decoration: underline;\n  }\n  h1 {\n    font-size: 18px;\n    color:${this.link_color};\n    font-weight:normal\n  }\n  h2 {\n    font-size: 16px;\n    text-align: center;\n  }\n  .menu {\n    padding-left: 10px;\n  }\n  /* ダイスロール結果 */\n  .dice {\n    font-weight: bold;\n    color: #555;\n  }\n  .dice.success {\n    color: #2196f3;\n  }\n  .dice.failed {\n    color: #f50057;\n  }\n  .main {\n    padding: 10px 1em 100px;\n    padding-bottom: 100px;\n    font-size: 14px;\n  }\n  .main div {\n    padding-top: 5px;\n    padding-bottom: 5px;\n  }\n  /* 情報タブ */\n  .info {\n    background-color: #fafafa;\n    border-left:solid 2px #bbb;    \n  }\n  /* 雑談タブ */\n  .other {\n    font-size: 12px;\n    margin-left: 50px;\n    padding-left: 10px;\n    padding-right: 10px;\n    background-color: #f7f7f7;\n    border-left:solid 1px #aaa;\n  }\n  /* 秘話 */\n  .secret {\n    font-size: 13px;\n    margin-left:50px;\n    padding-left:10px;\n    padding-right: 10px;\n  }\n${i}\n  .name-field {\n    display: inline-block;\n    font-weight: bold;\n    padding-right:5px;\n    vertical-align: top;\n  }\n  .text {\n    display: block;\n    word-break: break-word;\n  }\n  .day-line {\n    height: 1px;\n    background-color: #999999;\n    border: none;\n    margin: 10px 20px;\n  }\n  .day {\n    padding-top: 100px;\n  }\n  @media (min-width: 947px) {\n    /* 横幅が947px以上の場合に適用するスタイル */\n    .name-field {\n      text-align: right;\n      width: 120px;\n    }\n    .text {\n      display: inline-block;\n      width: 800px;\n      vertical-align: top;\n    }\n    .secret {\n      margin-left: 100px;\n    }\n  }\n</style>\n`}notFormat(e,t,s=null){return`<!DOCTYPE html>\n<html lang="ja">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <meta http-equiv="X-UA-Compatible" content="ie=edge" />\n    <title>ccfolia - logs</title>\n  </head>\n  <body>\n    \n${this.rows.map(a=>a.notFormat(e,t,s)).join("")}  </body>\n</html>`}}var v={name:"DiceResult",props:{visible:{type:Boolean,default:!1},system:{type:Object,default:()=>{}},names:{type:Array,default:()=>[]},initialSelectedNameTabs:{type:Array,default:()=>[]},ccfoliaLog:{type:y,default:y.fromObject()}},data(){return{selectedDiceResult:"",selectedDiceTabs:["メイン"],selectedNameTabs:[]}},computed:{diceRows:function(){return this.ccfoliaLog.rows.filter(e=>e.dice_type&&e.dice_type.resultKey==this.selectedDiceResult&&this.isIncludeSelectedDiceTabs(e.tab_name)&&this.selectedNameTabs.includes(e.name))}},watch:{system(){null!=this.system.diceTypes&&this.system.diceTypes[0]&&(this.selectedDiceResult=this.system.diceTypes[0].resultKey)},initialSelectedNameTabs(e){this.selectedNameTabs=e}},methods:{isIncludeSelectedDiceTabs(e){let t=e;return"main"==t&&(t="メイン"),"info"==t&&(t="情報"),"other"==t&&(t="雑談"),this.selectedDiceTabs.includes(t)}}},x=v,k=Object(u["a"])(x,b,_,!1,null,null,null),w=k.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"mb-3",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("ヘッダー設定 "),s("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("ヘッダー色とタイトルの設定ができます。"),s("br"),e._v("色は左と真ん中が背景色、右が文字色です。")]),s("el-button",{attrs:{icon:"el-icon-question",type:"text"}})],1)],1)]),s("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:e.headerColor1,callback:function(t){e.headerColor1=t},expression:"headerColor1"}}),s("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:e.headerColor2,callback:function(t){e.headerColor2=t},expression:"headerColor2"}}),s("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:e.linkColor,callback:function(t){e.linkColor=t},expression:"linkColor"}}),s("el-input",{staticClass:"mb-2",model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),s("div",{staticClass:"mb-3",style:"background:linear-gradient("+e.headerColor1+","+e.headerColor2+");color:"+e.linkColor},[s("div",{staticClass:"p-2"},[e._v(e._s(e.title))]),s("div",{staticClass:"p-2"},e._l(e.dividerRows,(function(t){return s("span",{key:t.name},[e._v(e._s(t.name)+" ")])})),0)])],1)},C=[],L={name:"DiceResult",mixins:[d],props:{initialHeaderColor1:{type:String,default:""},initialHeaderColor2:{type:String,default:""},initialLinkColor:{type:String,default:""},dividerRows:{type:Array,default:()=>[]}},data(){return{headerColor1:this.initialHeaderColor1,headerColor2:this.initialHeaderColor2,linkColor:this.initialLinkColor,title:""}},methods:{reset(e){this.title=e.title,this.headerColor1=e.header_color1,this.headerColor2=e.header_color2,this.linkColor=e.link_color}},watch:{headerColor1(e){this.$emit("changeHeaderColor1",e)},headerColor2(e){this.$emit("changeHeaderColor2",e)},linkColor(e){this.$emit("changeLinkColor",e)},title(e){this.$emit("changeTitle",e)}}},S=L,O=Object(u["a"])(S,T,C,!1,null,null,null),$=O.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"mb-3",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("タブ設定 "),s("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("出力するタブを設定できます。"),s("br"),e._v("雑談、情報以外のタブの色の設定ができます。"),s("br"),e._v("左側がラインの色、右側が背景色です。")]),s("el-button",{attrs:{icon:"el-icon-question",type:"text"}})],1)],1)]),s("small",[e._v("チェックの入っているタブが出力されます。")]),s("el-checkbox-group",{model:{value:e.selectedOutputTabs,callback:function(t){e.selectedOutputTabs=t},expression:"selectedOutputTabs"}},[s("el-checkbox",{attrs:{label:"メイン"}}),s("el-checkbox",{attrs:{label:"情報"}}),s("el-checkbox",{attrs:{label:"雑談"}}),e._l(e.ccfoliaLog.tabs,(function(e,t){return s("el-checkbox",{key:t,attrs:{label:e.name}})}))],2),s("el-checkbox",{attrs:{label:"シークレットダイスを隠す",border:"",size:"small"},model:{value:e.isHideSecretDice,callback:function(t){e.isHideSecretDice=t},expression:"isHideSecretDice"}}),e.ccfoliaLog.tabs.length>0?s("el-divider"):e._e(),e.ccfoliaLog.tabs.length>0?s("div",{staticClass:"mb-2"},[e._v("色設定")]):e._e(),e._l(e.ccfoliaLog.tabs,(function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedOutputTabs.includes(t.name),expression:"selectedOutputTabs.includes(tab.name)"}],key:t.name},[s("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:t.line_color,callback:function(s){e.$set(t,"line_color",s)},expression:"tab.line_color"}}),s("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:t.background_color,callback:function(s){e.$set(t,"background_color",s)},expression:"tab.background_color"}}),s("div",{staticClass:"mb-3",style:"font-size:13px;background-color:"+t.background_color+";border-left:solid 2px "+t.line_color+";"},[s("div",{staticClass:"p-2"},[e._v(e._s(t.name))])])],1)}))],2)},F=[],R={name:"TabSetting",mixins:[d],props:{ccfoliaLog:{type:y,default:y.fromObject()},initialSelectedOutputTabs:{type:Array,default:()=>[]},inisitalIsHideSecretDice:{type:Boolean,default:!1}},data(){return{selectedOutputTabs:this.initialSelectedOutputTabs,isHideSecretDice:this.inisitalIsHideSecretDice}},watch:{initialSelectedOutputTabs:function(e){this.selectedOutputTabs=e},selectedOutputTabs:function(e){this.$emit("changeSelectedOutputTabs",e)},isHideSecretDice:function(e){this.$emit("changeIsHideSecretDice",e)}}},H=R,N=Object(u["a"])(H,j,F,!1,null,null,null),D=N.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"mb-4",attrs:{shadow:"never","body-style":{height:"95vh","overflow-y":"scroll"}}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("ログ全文 "),s("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[s("el-button",{attrs:{icon:"el-icon-question",type:"text"}}),s("div",{attrs:{slot:"content"},slot:"content"},[e._v("+ボタンを押すとログに区切りを追加することができます。ヘッダーにもリンクが追加されます。"),s("br"),e._v("行ごと掴んで順序を入れ替えることができます。"),s("br"),e._v("磁石ボタンを押すと2回目に押した磁石ボタンまでの間にある同じタブ名の行をまとめることができます。")])],1)],1)]),s("draggable",{attrs:{options:{animation:200,handle:".handle"},list:e.ccfoliaLog.rows}},e._l(e.ccfoliaLog.rows,(function(t,a){return s("div",{key:a,staticClass:"my-1"},[t.is_divider?e._e():s("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedOutputTabs.includes(t.replaced_tab_name),expression:"selectedOutputTabs.includes(row.replaced_tab_name)"}],staticClass:"draggable handle",style:"color:"+t.color+";background-color:"+e.backgroundColor(t.tab_name)},[s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.addRow(a)}}},[e._v("+")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-attract",type:e.attractButtonType(a),disabled:e.attractFrom&&a<e.attractFrom},on:{click:function(t){return e.attract(a)}}}),s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.removeRowConfirm(a,"["+t.tab_name+"] "+t.name+"： "+t.body)}}}),e._v(" ["+e._s(t.tab_name)+"] "+e._s(t.name)+"： "),s("span",{domProps:{innerHTML:e._s(t.body)}}),s("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.is_secret,expression:"row.is_secret"}],attrs:{size:"mini",type:"warning"}},[e._v("シークレットダイス")])],1),t.is_divider?s("div",[s("el-row",{attrs:{gutter:5}},[s("el-col",{attrs:{span:1}},[s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.addRow(a)}}},[e._v("+")])],1),s("el-col",{attrs:{span:2}},[s("el-input",{attrs:{size:"mini",placeholder:"リンク名"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"row.name"}})],1),s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{size:"mini",placeholder:"表示名"},model:{value:t.body,callback:function(s){e.$set(t,"body",s)},expression:"row.body"}})],1),s("el-col",{attrs:{span:1}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeRow(a)}}})],1),s("el-col",{staticClass:"draggable handle text-white",attrs:{span:10}},[e._v(":")])],1)],1):e._e()])})),0),s("el-dialog",{attrs:{visible:e.visibleRemoveRow},on:{"update:visible":function(t){e.visibleRemoveRow=t}}},[s("div",{staticClass:"mb-3"},[e._v(e._s(e.removeText))]),s("span",[e._v("を削除しますか？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visibleRemoveRow=!1}}},[e._v("キャンセル")]),s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.removeRow(e.removeIndex)}}},[e._v("削除する")])],1)])],1)},K=[],z=s("b76a"),E=s.n(z),M={name:"TabSetting",mixins:[d],components:{draggable:E.a},props:{initialCcfoliaLog:{type:y,default:y.fromObject()},selectedOutputTabs:{type:Array,default:()=>[]},dividerRows:{type:Array,default:()=>[]}},data(){return{ccfoliaLog:this.initialCcfoliaLog,attractFrom:null,dogs:[],visibleRemoveRow:!1,removeIndex:null,removeText:null}},methods:{addRow(e){this.ccfoliaLog.rows.splice(e,0,g.fromObject({is_divider:!0,name:"",body:"",key:this.dividerRows.length}))},removeRow(e){this.ccfoliaLog.rows.splice(e,1),this.visibleRemoveRow=!1},removeRowConfirm(e,t){this.removeIndex=e,this.removeText=t,this.visibleRemoveRow=!0},attract(e){if(this.attractFrom===e)return this.attractFrom=null,void(this.dogs=[]);if(null===this.attractFrom)return void(this.attractFrom=e);if(this.dogs.includes(e))return void(this.dogs=this.dogs.filter(t=>t!=e));if(this.ccfoliaLog.rows[this.attractFrom].tab_name!=this.ccfoliaLog.rows[e].tab_name)return void this.dogs.push(e);const t=this.ccfoliaLog.rows,s=t[this.attractFrom].tab_name,a=this.dogs;for(let i=this.attractFrom+1;i<=e;i++)(a.includes(i)||t[i].tab_name===s)&&(t.splice(this.attractFrom+1,0,t.splice(i,1)[0]),this.attractFrom++);this.attractFrom=null,this.dogs=[]},attractButtonType(e){return this.attractFrom==e?"info":this.dogs.includes(e)?"warning":null==this.attractFrom||e<this.attractFrom||this.ccfoliaLog.rows[e].tab_name!=this.ccfoliaLog.rows[this.attractFrom].tab_name?null:"primary"},backgroundColor(e){return"メイン"==e||"main"==e?"#ffffff":"雑談"==e||"other"==e?"#f7f7f7":"情報"==e||"info"==e?"#fafafa":this.ccfoliaLog.tabs.find(t=>t.name==e).background_color}},watch:{initialCcfoliaLog:function(e){this.ccfoliaLog=e},ccfoliaLog:function(e){this.$emit("changeCcFoliaLog",e)}}},B=M,P=Object(u["a"])(B,I,K,!1,null,null,null),A=P.exports,q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"ログの追加",visible:e.visible,width:"80%","close-on-click-modal":!1,top:"10vh"},on:{"update:visible":function(t){e.visible=t}}},[s("div",{staticStyle:{height:"60vh","overflow-y":"scroll"}},e._l(e.ccfoliaLog.rows,(function(t,a){return s("div",{key:a,staticClass:"my-1"},[t.is_divider?e._e():s("div",{style:"color:"+t.color+";background-color:"+e.backgroundColor(a)},[s("el-button",{attrs:{size:"mini",icon:"el-icon-magic-stick",type:e.addButtonType(a)},on:{click:function(t){return e.select(a)}}}),e._v(" ["+e._s(t.tab_name)+"] "+e._s(t.name)+"： "),s("span",{domProps:{innerHTML:e._s(t.body)}}),s("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.is_secret,expression:"row.is_secret"}],attrs:{size:"mini",type:"warning"}},[e._v("シークレットダイス")])],1)])})),0),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("キャンセル")]),s("el-button",{attrs:{type:"primary",disabled:null==e.beforeIndex},on:{click:e.clickAddButton}},[e._v("選択範囲をログの末尾に追加する")])],1)])],1)},U=[],G={name:"LogSeconds",mixins:[d],components:{},props:{initialCcfoliaLog:{type:y,default:y.fromObject()}},data(){return{ccfoliaLog:this.initialCcfoliaLog,visible:!1,fromIndex:null,toIndex:null,beforeIndex:null}},methods:{reset(){this.fromIndex=null,this.toIndex=null,this.beforeIndex=null},select(e){const t=this.beforeIndex;this.beforeIndex=e,this.fromIndex=null==t||e<t?e:t,this.toIndex=null==t||t<e?e:t},addButtonType(e){return this.fromIndex==e||this.toIndex==e?"primary":null},backgroundColor(e){return null==this.fromIndex&&null==this.toIndex?"":this.fromIndex<=e&&e<=this.toIndex?"#f3f9ff":""},clickAddButton(){this.addSelected(),this.visible=!1},addSelected(){this.$emit("addSelected",[this.fromIndex,this.toIndex])}},watch:{initialCcfoliaLog:function(e){this.ccfoliaLog=e},visible(){this.reset()}}},J=G,X=Object(u["a"])(J,q,U,!1,null,null,null),Y=X.exports,V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("small",[s("div",[e._v("最終更新: "+e._s(e.histories[0].date)+" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.drawer=!0}}},[e._v("履歴")])],1),e._m(0)]),s("el-drawer",{attrs:{title:"履歴",visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},e._l(e.histories,(function(t){return s("ul",{key:t.index,staticStyle:{"font-size":"0.8em"}},[s("li",[e._v(e._s(t.date)+" "+e._s(t.text))])])})),0)],1)},Q=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mb-4"},[e._v("Twitter: "),s("a",{attrs:{href:"https://twitter.com/inouemoku",target:"_blank"}},[e._v("@inouemoku")])])}],W={name:"Histories",data(){return{drawer:!1,histories:[{date:"2024-07-28",text:"整形しないでダウンロードでタブ名を旧/新それぞれの表記に寄せられる機能を追加"},{date:"2024-07-23",text:"整形しないでダウンロードするとメイン/情報/雑談タブが消えてしまう不具合修正"},{date:"2024-07-12",text:"タブ設定で選択していないタブが出力される不具合修正"},{date:"2024-07-03",text:"タブ名の変更に対応"},{date:"2024-04-29",text:"ヘッダーの内容が反映されない不具合修正"},{date:"2024-03-25",text:"新クトゥルフ神話TRPG(7版)に対応"},{date:"2024-03-23",text:"行を削除できるように変更"},{date:"2024-03-23",text:"ログを追加で読み込めるように変更"},{date:"2024-01-27",text:"整形したログを読み込んだ時に複数の改行があると消去されてしまうのを修正"},{date:"2024-01-26",text:"タイトルが反映されないのを修正"},{date:"2024-01-25",text:"選択したタブ以外も出力されてしまうのを修正"},{date:"2024-01-23",text:"整形したログを整形するとダイス表示がおかしくなるのを修正"},{date:"2023-09-11",text:"タブごとに行をまとめる時に他のタブも巻き込めるように変更"},{date:"2023-06-19",text:"整形したログを再度読み込めるように変更"},{date:"2023-03-26",text:"タブごとに行をまとめる機能を追加"},{date:"2022-10-26",text:"整形しないでダウンロードする機能を追加"},{date:"2022-09-06",text:"本文の順序入れ替え時にフォーム部分が反応しないように修正"},{date:"2022-05-30",text:"シークレットダイスの判定を修正"},{date:"2022-05-20",text:"シークレットダイスの判定を修正"},{date:"2022-05-07",text:"インセイン、シノビガミに対応"},{date:"2022-04-26",text:"シークレットダイスの結果を隠せるように変更"},{date:"2022-04-22",text:"出力するタブを選択できるように変更"},{date:"2022-02-06",text:"タブ色設定の初期色を変更"},{date:"2021-09-14",text:"ヘッダーのタイトル色が変更されないのを修正"},{date:"2021-06-27",text:"背景色が編集パネルに反映されるように変更"},{date:"2021-06-06",text:"ダイス結果を名前で絞り込めるように変更"},{date:"2021-03-29",text:"エモクロアTRPGに対応"},{date:"2021-03-15",text:"リンクが効かない不具合の修正"},{date:"2021-03-13",text:"本文の順序を入れ替える機能を追加"},{date:"2021-02-27",text:"一行のダイス結果表記に対応"},{date:"2021-02-23",text:"公開"}]}}},Z=W,ee=Object(u["a"])(Z,V,Q,!1,null,null,null),te=ee.exports,se={methods:{analyzeHtmlCcfolia(e){let t=y.fromObject();const s=Array.from(e.getElementsByTagName("p"));t.rows=s.map(e=>{const{isOneline:t,diceType:s,isSecret:a}=this.diceType(e.children[2].innerHTML),i={color:e.outerHTML.match(/<p style="color:(.*);">/)[1],tab_name:e.children[0].innerText.replace(/^ \[(.*)\]/,"$1"),name:e.children[1].innerText,body:e.children[2].innerHTML,dice_type:s,is_oneline:t,is_secret:a};return g.fromObject(i)});const{names:a,selectedNameTabs:i}=t.rows.filter(e=>null!=e.dice_type).reduce(({names:e,selectedNameTabs:t},s)=>(e.includes(s.name)||(e.push(s.name),t.push(s.name)),{names:e,selectedNameTabs:t}),{names:[],selectedNameTabs:[]}),n=[...new Set(t.rows.map(e=>e.replaced_tab_name))],o=g.fromObject({key:0,is_divider:!0,name:"1",body:"1日目"}),l=n.reduce((e,s)=>("メイン"!=s&&"main"!=s&&"雑談"!=s&&"other"!=s&&"情報"!=s&&"info"!=s&&e.push(this.tabColors(t.rows,s)),e),[]);return t.rows=[o].concat(t.rows),t.tabs=l,{ccfoliaLog:t,names:a,selectedNameTabs:i,uniqTabs:n}},analyzeHtmlMochiMochi(e){let t=y.fromObject();const s=Array.from(e.getElementById("header").children);t.title=s[0].innerText;const a=Array.from(s[1].children).map(e=>({key:e.hash.slice(1),name:e.innerText})),i=Array.from(e.getElementsByClassName("main")[0].children),n=e.getElementsByTagName("style")[0].innerText,o=this.parseCssToObject(n),l=o.find(e=>"#header"==e.key).contents.background.match(/linear-gradient\((#.*),(#.*)\)/);t.header_color1=l[1],t.header_color2=l[2];const r=function(e){return"#"+e.match(/\d+/g).map((function(e){return("0"+parseInt(e).toString(16)).slice(-2)})).join("")};t.rows=i.map(e=>{if("day-line"==e.className)return;if("day"==e.className){const t=e.id.slice(3),s=g.fromObject({key:t,is_divider:!0,name:a.find(e=>e.key.slice(3)==t).name,body:e.innerText});return s}const t=this.diceTypeMochi(e.children[1]),s=null==t?e.children[1].innerHTML:this.htmlSpecialChars(""+e.children[1].innerText),{isOneline:i,diceType:n,isSecret:o}=this.diceType(s),l={color:r(e.style.color),tab_name:this.tabNameMochi(e),name:e.children[0].children[0].innerText.slice(0,-2),body:s,dice_type:n,is_oneline:i,is_secret:o};return g.fromObject(l)}).filter(e=>e);const{names:c,selectedNameTabs:d}=t.rows.filter(e=>null!=e.dice_type).reduce(({names:e,selectedNameTabs:t},s)=>(e.includes(s.name)||(e.push(s.name),t.push(s.name)),{names:e,selectedNameTabs:t}),{names:[],selectedNameTabs:[]}),m=[...new Set(t.rows.map(e=>e.replaced_tab_name))].filter(e=>e);var h=0;const u=m.reduce((e,s)=>{if("メイン"!=s&&"main"!=s&&"雑談"!=s&&"other"!=s&&"情報"!=s&&"info"!=s){const a=o.find(e=>e.key==".tab"+h).contents,i=a["border-left"].match(/.*(#.*)/)[1],n=a["background-color"];h+=1,e.push(this.tabColors(t.rows,s,i,n))}return e},[]);return t.tabs=u,{ccfoliaLog:t,names:c,selectedNameTabs:d,uniqTabs:m}},htmlSpecialChars(e){var t=document.createTextNode(e),s=document.createElement("p");return s.appendChild(t),s.innerHTML},tabNameMochi(e){return null!=e.attributes["tab-name"]?e.attributes["tab-name"].nodeValue:null==e.classList[0]?"メイン":"info"==e.classList[0]?"情報":"other"==e.classList[0]?"雑談":"secret"==e.classList[0]?e.classList[1]:void 0},diceTypeMochi(e){if(null==e.children[1])return null;if("BR"==e.children[1].nodeName)return null;const t=e.children[1].classList[1];return null==t?"dice":t},parseCssToObject(e){var t=[],s=e.match(/(.*){([^{}]+)}/g);return s&&s.forEach(e=>{const s=/(.*)\s*{([^}]*)}/,a=e.match(s);if(a){const e=a[1].trim(),s=a[2].trim();var i={};s.split(";").forEach((function(e){e=e.replace(/\r?\n? /g,"");var t=e.split(":");if(0!=t[0].length){var s=t[0].trim(),a=t[1].trim();i[s]=a}})),t.push({key:e,contents:i})}}),t},tabColors(e,t,s=null,a=null){if(null!=s&&null!=a)return{name:t,line_color:s,background_color:a};const i=e.filter(e=>!e.is_divider&&e.tab_name===t&&"#222222"!==e.color&&"#888888"!==e.color&&!e.name.match(/GM|KP|DL/));if(0===i.length)return{name:t,line_color:"#aaa",background_color:"#f7f7f7"};const n=i.reduce((e,t)=>e&&e.color!==t.color?e:t,null);return{name:t,line_color:n.color,background_color:this.convertToPaleColorSharp(n.color,.05)}},compositeColor(e,t){const s=parseInt(e,16)*t+255*(1-t);return Math.floor(s).toString(16)},convertToPaleColor(e,t){const s=[e.slice(0,2),e.slice(2,4),e.slice(4,6)];return s.map(e=>this.compositeColor(e,t)).join("")},convertToPaleColorSharp(e,t){const s=e.slice(1);return"#"+this.convertToPaleColor(s,t)},diceType(e){const{system:t}=this,s=/\n\s*[sS]/.test(e),a=!/.*${system.diceText} :.*＞.*/.test(e),i=e.match(/(.*)\((.*)\)(.*)＞ (.*)/);if(a){const a=new RegExp(`.*＞ (${t.diceTypes.map(e=>e.name).join("|")})`),n=e.match(a);if(n){const e=t.diceTypes.find(e=>e.name===n[1]);return{isOneline:!0,diceType:e,isSecret:s}}return i?{isOneline:!0,diceType:null,isSecret:s}:{isOneline:!0,diceType:null,isSecret:!1}}const n=new RegExp(`.*${t.diceText} :.*＞ (${t.diceTypes.map(e=>e.name).join("|")})`),o=e.match(n);if(o){const e=t.diceTypes.find(e=>e.name===o[1]);return{isOneLlne:!1,diceType:e,isSecret:s}}return i?{isOneline:!1,diceType:null,isSecret:s}:{isOneline:!1,diceType:null,isSecret:!1}}}},ae={name:"CcfoliaFormatter",mixins:[se,d],components:{SystemForm:p,DiceResult:w,HeaderSetting:$,TabSetting:D,LogEditor:A,LogSeconds:Y,Histories:te},data(){return{ccfoliaLog:y.fromObject(),ccfoliaLogSecond:y.fromObject(),system:{},selectedNameTabs:[],selectedNameTabsSecond:[],selectedOutputTabs:[],selectedOutputTabsSecond:[],names:[],namesSecond:[],isHideSecretDice:!1,filename:"",visibleSecondsDialog:!1,fileList:[],title:""}},props:{},methods:{selectSystem(e){this.ccfoliaLog.system=e},changeHeaderColor1(e){this.ccfoliaLog.header_color1=e},changeHeaderColor2(e){this.ccfoliaLog.header_color2=e},changeLinkColor(e){this.ccfoliaLog.link_color=e},changeTitle(e){this.ccfoliaLog.title=e},changeIsHideSecretDice(e){this.isHideSecretDice=e},changeSelectedOutputTabs(e){this.selectedOutputTabs=e},changeCcfoliaLog(e){this.ccfoliaLog=e},postCcfoliaLog(){this.downloadBlob(this.ccfoliaLog.format(this.selectedOutputTabs,this.isHideSecretDice),this.filename.replace(/^(.*).html$/,"$1_整形.html"),"text/html")},postOriginalCcfoliaLog(){this.downloadBlob(this.ccfoliaLog.notFormat(this.selectedOutputTabs,this.isHideSecretDice),this.filename,"text/html")},postOriginalCcfoliaLogConvert(e){console.log(e),this.downloadBlob(this.ccfoliaLog.notFormat(this.selectedOutputTabs,this.isHideSecretDice,e),this.filename,"text/html")},handleChangeFile(e){this.fileList=[],0==this.ccfoliaLog.rows.length?this.handleChangeFileFirst(e):this.handleChangeFileSeconds(e)},handleChangeFileFirst(e){this.ccfoliaLog.file=e,this.system=this.systems.find(e=>e.key==this.ccfoliaLog.system);const t=this.ccfoliaLog.file.name.replace(/^(.*).html$/,"$1").replace(/^(.*)\[all\]$/,"$1");this.title=`${this.system.prefix}${t}`,this.filename=this.ccfoliaLog.file.name,this.analyzeHtmlFirst()},handleChangeFileSeconds(e){this.resetSeconds(),this.ccfoliaLogSecond.file=e,this.analyzeHtmlSeconds(),this.$refs.logSeconds.visible=!0},resetSeconds(){this.ccfoliaLogSecond=y.fromObject(),this.selectedNameTabsSecond=[],this.selectedOutputTabsSecond=[],this.namesSecond=[]},downloadBlob(e,t,s){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{const a=URL.createObjectURL(new Blob([e],{type:s})),i=document.createElement("a");i.href=a,i.setAttribute("download",t),document.body.appendChild(i),i.click(),URL.revokeObjectURL(a),i.parentNode.removeChild(i)}},analyzeHtmlFirst(){const e=new FileReader,t=this;e.onload=function(){const s=new DOMParser,a=s.parseFromString(e.result,"text/html"),i=a.getElementsByTagName("parsererror");if(i.length>0)return t.$message({type:"error",message:"ファイルの解析に失敗しました"}),void console.log(i);const n=a.getElementsByClassName("main"),{ccfoliaLog:o,names:l,selectedNameTabs:r,uniqTabs:c}=n.length>0?t.analyzeHtmlMochiMochi(a):t.analyzeHtmlCcfolia(a);t.ccfoliaLog=o,""==t.ccfoliaLog.title&&(t.ccfoliaLog.title=t.title),t.$refs.headerSetting.reset(t.ccfoliaLog),t.names=l,t.selectedNameTabs=r,t.selectedOutputTabs=c,console.log("onload end")},e.readAsText(this.ccfoliaLog.file.raw)},analyzeHtmlSeconds(){const e=new FileReader,t=this;e.onload=function(){const s=new DOMParser,a=s.parseFromString(e.result,"text/html"),i=a.getElementsByTagName("parsererror");if(i.length>0)return t.$message({type:"error",message:"ファイルの解析に失敗しました"}),void console.log(i);const n=a.getElementsByClassName("main"),{ccfoliaLog:o,names:l,selectedNameTabs:r,uniqTabs:c}=n.length>0?t.analyzeHtmlMochiMochi(a):t.analyzeHtmlCcfolia(a);t.ccfoliaLogSecond=o,t.namesSecond=l,t.selectedNameTabsSecond=r,t.selectedOutputTabsSecond=c,console.log("onload end")},e.readAsText(this.ccfoliaLogSecond.file.raw)},addSelected(e){const t=e[0],s=e[1];console.log(this.names,this.namesSecond),this.names=this.concatSeconds(this.names,this.namesSecond),this.selectedNameTabs=this.concatSeconds(this.selectedNameTabs,this.selectedNameTabsSecond),this.selectedOutputTabs=this.concatSeconds(this.selectedOutputTabs,this.selectedOutputTabsSecond);const a=this.ccfoliaLogSecond.tabs.filter(e=>!this.ccfoliaLog.tabs.some(t=>t.name==e.name));this.ccfoliaLog.tabs=this.ccfoliaLog.tabs.concat(a);const i=this.ccfoliaLogSecond.rows.filter((e,a)=>t<=a&&a<=s);this.ccfoliaLog.rows=this.ccfoliaLog.rows.concat(i)},concatSeconds(e,t){const s=t.filter(t=>!e.some(e=>e==t));return e.concat(s)}},computed:{dividerRows:function(){return this.ccfoliaLog.rows.filter(e=>e.is_divider)}}},ie=ae,ne=(s("0211"),Object(u["a"])(ie,o,l,!1,null,null,null)),oe=ne.exports,le={name:"App",components:{CcfoliaFormatter:oe}},re=le,ce=Object(u["a"])(re,i,n,!1,null,null,null),de=ce.exports,me=s("5c96"),he=s.n(me),ue=s("c3ff"),fe=s.n(ue),pe=s("4897"),be=s.n(pe);s("0fae"),s("e05f"),s("f9e3"),s("2dd8");be.a.use(fe.a),a["default"].use(he.a),a["default"].config.productionTip=!0,new a["default"]({render:e=>e(de)}).$mount("#app")}});
//# sourceMappingURL=app.bcb0a7bf.js.map